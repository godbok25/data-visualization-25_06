<!DOCTYPE html>
<html lang="ko" data-theme="dark">
<head>
  <meta charset="UTF-8" />
  <title>ë¬¸í™”ìœ ì‚° ë¦¬ë””ìì¸ íŠ¸ë Œë“œ ë°ì´í„° ì‹œê°í™”</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <!-- Pretendard CDN -->
  <link rel="preconnect" href="https://cdn.jsdelivr.net" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/static/pretendard.css" />
  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    :root {
      --bg: #020617;
      --bg-elevated: #020617;
      --panel: #020617;
      --panel-soft: #020617;
      --border-subtle: rgba(148, 163, 184, 0.35);
      --accent: #38bdf8;
      --accent-soft: rgba(56, 189, 248, 0.18);
      --accent-strong: #0ea5e9;
      --accent-alt: #a855f7;
      --text-main: #e5e7eb;
      --text-soft: #9ca3af;
      --text-faint: #6b7280;
      --chip-bg: rgba(15, 23, 42, 0.85);
      --shadow-soft: 0 18px 45px rgba(15, 23, 42, 0.95);
    }

    :root[data-theme="light"] {
      --bg: #f9fafb;
      --bg-elevated: #eef2ff;
      --panel: #ffffff;
      --panel-soft: #f3f4ff;
      --border-subtle: rgba(148, 163, 184, 0.45);
      --accent: #2563eb;
      --accent-soft: rgba(37, 99, 235, 0.12);
      --accent-strong: #1d4ed8;
      --accent-alt: #7c3aed;
      --text-main: #0f172a;
      --text-soft: #4b5563;
      --text-faint: #9ca3af;
      --chip-bg: rgba(255, 255, 255, 0.9);
      --shadow-soft: 0 18px 40px rgba(15, 23, 42, 0.18);
    }

    *,
    *::before,
    *::after {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      min-height: 100vh;
      font-family: "Pretendard", -apple-system, BlinkMacSystemFont, system-ui, sans-serif;
      background: radial-gradient(circle at top left, rgba(56, 189, 248, 0.18), transparent 55%),
                  radial-gradient(circle at bottom right, rgba(139, 92, 246, 0.16), transparent 55%),
                  var(--bg);
      color: var(--text-main);
      -webkit-font-smoothing: antialiased;
      padding: 28px 18px 32px;
    }

    .page-shell {
      max-width: 1200px;
      margin: 0 auto;
    }

    .header-row {
      display: flex;
      align-items: flex-start;
      justify-content: space-between;
      gap: 16px;
      margin-bottom: 18px;
    }

    h1 {
      font-size: 24px;
      letter-spacing: -0.04em;
      margin: 0 0 4px;
    }

    .subtitle {
      margin: 0;
      font-size: 13px;
      color: var(--text-soft);
      max-width: 560px;
      line-height: 1.5;
    }

    .chip-row {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      margin-bottom: 18px;
    }

    .chip {
      font-size: 11px;
      padding: 5px 10px;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.35);
      background: rgba(15, 23, 42, 0.65);
      color: var(--text-soft);
      display: inline-flex;
      align-items: center;
      gap: 5px;
      backdrop-filter: blur(10px);
    }

    :root[data-theme="light"] .chip {
      background: rgba(255, 255, 255, 0.85);
    }

    .chip strong {
      color: var(--accent);
      font-weight: 600;
    }

    .layout {
      display: grid;
      grid-template-columns: minmax(0, 2.1fr) minmax(0, 1.1fr);
      gap: 18px;
    }

    .panel {
      border-radius: 18px;
      /* background: radial-gradient(circle at top left, rgba(148, 163, 184, 0.12), transparent 55%),
                  radial-gradient(circle at bottom right, rgba(15, 23, 42, 0.9), transparent 60%),
                  var(--panel); */
      border: 1px solid var(--border-subtle);
      box-shadow: var(--shadow-soft);
      padding: 18px 18px 16px;
      position: relative;
      overflow: hidden;
    }

    .panel-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 12px;
      margin-bottom: 8px;
    }

    .panel-title {
      font-size: 14px;
      font-weight: 600;
      letter-spacing: -0.02em;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .panel-kicker {
      font-size: 11px;
      color: var(--accent);
      font-weight: 500;
      text-transform: uppercase;
      letter-spacing: 0.12em;
    }

    .panel-sub {
      font-size: 11px;
      color: var(--text-soft);
    }

    .badge-compare {
      font-size: 10px;
      padding: 2px 8px;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.5);
      color: var(--text-soft);
      background: rgba(15, 23, 42, 0.8);
    }

    :root[data-theme="light"] .badge-compare {
      background: rgba(255, 255, 255, 0.9);
    }

    .chart-shell {
      margin-top: 8px;
      border-radius: 14px;
      /* background: radial-gradient(circle at top left, rgba(56, 189, 248, 0.12), transparent 55%),
                  radial-gradient(circle at bottom right, rgba(31, 41, 55, 0.9), transparent 60%),
                  rgba(15, 23, 42, 0.9); */
      padding: 10px 12px 12px;
      border: 1px solid rgba(15, 23, 42, 0.85);
      position: relative;
      min-height: 260px;
    }

    :root[data-theme="light"] .chart-shell {
      background: radial-gradient(circle at top left, rgba(37, 99, 235, 0.09), transparent 55%),
                  #ffffff;
      border-color: rgba(209, 213, 219, 0.9);
    }

    .chart-meta-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-top: 8px;
      gap: 10px;
      font-size: 11px;
      color: var(--text-faint);
    }

    .legend-inline {
      display: flex;
      flex-wrap: wrap;
      gap: 6px 10px;
      align-items: center;
    }

    .legend-item {
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }

    .legend-swatch {
      width: 9px;
      height: 9px;
      border-radius: 999px;
    }

    .toggle-pill {
      position: relative;
      display: inline-flex;
      align-items: center;
      padding: 2px;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.5);
      font-size: 10px;
      background: rgba(15, 23, 42, 0.9);
      color: var(--text-soft);
      gap: 2px;
    }

    :root[data-theme="light"] .toggle-pill {
      background: rgba(255, 255, 255, 0.95);
    }

    .toggle-pill button {
      border: none;
      background: transparent;
      color: inherit;
      padding: 3px 8px;
      border-radius: 999px;
      cursor: pointer;
      font-size: inherit;
    }

    .toggle-pill button.is-active {
      background: var(--accent-soft);
      color: var(--accent-strong);
      font-weight: 600;
    }

    .group-toggle-row {
      display: inline-flex;
      gap: 8px;
      align-items: center;
      font-size: 11px;
    }

    .group-toggle-row label {
      display: inline-flex;
      align-items: center;
      gap: 4px;
      padding: 4px 7px;
      border-radius: 999px;
      background: rgba(15, 23, 42, 0.85);
      border: 1px solid rgba(148, 163, 184, 0.55);
      cursor: pointer;
    }

    :root[data-theme="light"] .group-toggle-row label {
      background: rgba(255, 255, 255, 0.9);
    }

    .group-toggle-row input {
      width: 10px;
      height: 10px;
      accent-color: var(--accent);
    }

    .group-tag {
      font-size: 10px;
      padding: 3px 7px;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.7);
      background: rgba(15, 23, 42, 0.85);
      color: var(--text-soft);
      margin-right: 4px;
    }

    :root[data-theme="light"] .group-tag {
      background: rgba(255, 255, 255, 0.9);
    }

    .cards {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    .mini-card {
      border-radius: 14px;
      /* background: radial-gradient(circle at top left, rgba(148, 163, 184, 0.2), transparent 55%),
                  radial-gradient(circle at bottom right, rgba(15, 23, 42, 0.9), transparent 70%),
                  var(--panel-soft); */
      border: 1px solid var(--border-subtle);
      padding: 12px 12px 11px;
      display: grid;
      grid-template-columns: minmax(0, 3.4fr) 64px;
      gap: 10px;
      align-items: center;
    }

    .mini-card h3 {
      margin: 0 0 4px;
      font-size: 12px;
      letter-spacing: -0.02em;
    }

    .mini-card .kicker {
      font-size: 10px;
      color: var(--accent);
      margin-bottom: 2px;
      text-transform: uppercase;
      letter-spacing: 0.12em;
      font-weight: 500;
    }

    .mini-card p {
      margin: 0;
      font-size: 11px;
      color: var(--text-soft);
      line-height: 1.5;
    }

    .mini-card .meta {
      margin-top: 5px;
      font-size: 10px;
      color: var(--text-faint);
    }

    .mini-thumb {
      width: 64px;
      height: 64px;
      border-radius: 12px;
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
      border: 1px solid rgba(148, 163, 184, 0.6);
      position: relative;
      overflow: hidden;
    }

    .mini-thumb::after {
      content: "";
      position: absolute;
      inset: 0;
      /* background: radial-gradient(circle at top left, rgba(248, 250, 252, 0.16), transparent 55%); */
    }

    .mini-thumb.a {
      background-image: url("./img/01.png");
    }

    .mini-thumb.b {
      background-image: url("./img/02.png");
    }

    .mini-thumb.c {
      background-image: url("./img/03.png");
    }

    footer {
      margin-top: 14px;
      font-size: 10px;
      color: var(--text-faint);
      display: flex;
      justify-content: space-between;
      gap: 10px;
      flex-wrap: wrap;
    }

    footer span {
      white-space: nowrap;
    }
    .insights-box {
    margin-top: 40px;
    padding: 25px;
    border-radius: 14px;
    background: var(--card-bg);
    box-shadow: var(--card-shadow);
    line-height: 1.6;
  }
  .insights-box h3 {
    margin-bottom: 15px;
    font-weight: 700;
  }  

    @media (max-width: 900px) {
      body {
        padding: 20px 14px 24px;
      }

      .layout {
        grid-template-columns: minmax(0, 1fr);
      }

      .header-row {
        flex-direction: column;
        align-items: flex-start;
      }

      .mini-card {
        grid-template-columns: minmax(0, 1fr) 56px;
      }

      .mini-thumb {
        width: 56px;
        height: 56px;
      }
    }
  </style>
</head>
<body>
  <div class="page-shell">
    <div class="header-row">
      <div>
        <h1>ë¬¸í™”ìœ ì‚° ë¦¬ë””ìì¸ íŠ¸ë Œë“œ ë°ì´í„° ì‹œê°í™”</h1>
        <p class="subtitle">
          êµ­ë¦½ì¤‘ì•™ë°•ë¬¼ê´€ êµ¿ì¦ˆ, ì „í†µ ì†Œì¬(ìê°œÂ·ë¯¼í™”Â·ë‹¨ì²­Â·ì „í†µë¬¸ì–‘Â·ê³ ë ¤ì²­ì), ê·¸ë¦¬ê³  KCDFÂ·êµ­ê°€ìœ ì‚°ì§„í¥ì› ë“± ì£¼ìš” ê¸°ê´€
          í‚¤ì›Œë“œë¥¼ Google Trendsë¡œ ë¶„ì„í•´, ê°ì„±ì†Œë¹„ ì‹œëŒ€ì˜ ë¬¸í™”ìœ ì‚° ë¦¬ë””ìì¸ íë¦„ì„ í•œëˆˆì— ë³´ì—¬ì¤€ë‹¤.
        </p>
      </div>
      <div class="toggle-pill" aria-label="ìƒ‰ìƒ í…Œë§ˆ ì „í™˜">
        <button id="themeDark" class="is-active">Dark</button>
        <button id="themeLight">Light</button>
      </div>
    </div>

    <div class="chip-row">
      <div class="chip"><strong>ê¸°ê°„</strong> Â· ëŒ€í•œë¯¼êµ­ Â· ìµœê·¼ 5ë…„ Â· ì›¹ ê²€ìƒ‰</div>
      <div class="chip"><strong>ë°ì´í„° ì¶œì²˜</strong> Â· Google Trends</div>
      <div class="chip"><strong>ë¹„êµ ì¶•</strong> Â· A êµ¿ì¦ˆ/ìƒí’ˆ Â· B ì „í†µì†Œì¬ Â· C ê¸°ê´€/í”Œë«í¼</div>
    </div>

    <div class="layout">
      <!-- LEFT: Chart -->
      <section class="panel">
        <div class="panel-header">
          <div>
            <div class="panel-kicker">ì¢…í•© ë¹„êµ</div>
            <div class="panel-title">
              AÂ·BÂ·C ê·¸ë£¹ ê´€ì‹¬ë„ ì¶”ì´
              <span class="badge-compare">ëŒ€í‘œ í‚¤ì›Œë“œ 3ì¢… ë¹„êµ</span>
            </div>
            <div class="panel-sub">A: êµ­ë¦½ì¤‘ì•™ë°•ë¬¼ê´€ êµ¿ì¦ˆ Â· B: ìê°œ Â· C: êµ­ë¦½ì¤‘ì•™ë°•ë¬¼ê´€</div>
          </div>
          <div class="group-toggle-row" aria-label="ê·¸ë£¹ í‘œì‹œ ì—¬ë¶€">
            <label><input type="checkbox" id="toggleA" checked />A ê·¸ë£¹</label>
            <label><input type="checkbox" id="toggleB" checked />B ê·¸ë£¹</label>
            <label><input type="checkbox" id="toggleC" checked />C ê·¸ë£¹</label>
          </div>
        </div>

        <div class="chart-shell">
          <canvas id="trendChart"></canvas>
          <div class="insights-box">
  <h3>ğŸ“Š ì¢…í•© ì¸ì‚¬ì´íŠ¸ (Insights)</h3>
  <p><strong>1) ê¸°ê´€ ê¸°ë°˜ í‚¤ì›Œë“œ(C ê·¸ë£¹)ê°€ ì „ì²´ ê´€ì‹¬ë„ë¥¼ ì£¼ë„</strong><br>
     ê¸°ê´€/í”Œë«í¼ í‚¤ì›Œë“œëŠ” ê¾¸ì¤€í•œ ê´€ì‹¬ë„ì™€ íŠ¹ì • ì‹œê¸° ê¸‰ìƒìŠ¹ íŒ¨í„´ì´ ë‚˜íƒ€ë‚˜ë©°,
     ì „í†µë¬¸í™” ì†Œë¹„ê°€ â€˜ì´ë²¤íŠ¸ ê¸°ë°˜ ì†Œë¹„â€™ì„ì„ ë³´ì—¬ì¤€ë‹¤.</p>

  <p><strong>2) ì „í†µ ì†Œì¬(B ê·¸ë£¹)ëŠ” ì™„ë§Œí•˜ì§€ë§Œ ê¾¸ì¤€í•œ ê´€ì‹¬ë„</strong><br>
     ìê°œÂ·ë¯¼í™”Â·ë‹¨ì²­ ë“± ì „í†µ ì†Œì¬ëŠ” ê°ì„± ì†Œë¹„ íŠ¸ë Œë“œ ì†ì—ì„œ
     ì§€ì†ì ìœ¼ë¡œ ì°¸ì¡°ë˜ëŠ” ë””ìì¸ ì–¸ì–´ì„ì„ ì˜ë¯¸í•œë‹¤.</p>

  <p><strong>3) êµ¿ì¦ˆÂ·ìƒí’ˆ(A ê·¸ë£¹)ì€ íŠ¹ì • ì‹œê¸° ê¸‰ìƒìŠ¹í•˜ëŠ” ë‹¨ê¸°í˜• íŒ¨í„´</strong><br>
     ì „ì‹œÂ·SNS ë°”ì´ëŸ´ ì‹œì ì—ë§Œ ê¸‰ìƒìŠ¹í•˜ëŠ” ê²½í–¥ìœ¼ë¡œ,
     ì „í†µë¬¸í™” ìƒí’ˆ ì†Œë¹„ëŠ” ë³€ë™ì„±ì´ í¬ê³  ë°”ì´ëŸ´ ì˜ì¡´ë„ê°€ ë†’ë‹¤.</p>

  <p><strong>4) ë¬¸í™”ìœ ì‚° ë¦¬ë””ìì¸ ìƒíƒœê³„ëŠ” â€˜ê¸°ê´€ â†’ ì†Œì¬ â†’ ìƒí’ˆâ€™ ìˆœìœ¼ë¡œ êµ¬ì¡°í™”</strong><br>
     ê¸°ê´€ì´ ì½˜í…ì¸  ì œì‘Â·í™•ì‚°ì„ ì£¼ë„í•˜ê³ ,
     ì†Œì¬ê°€ ë””ìì¸ ì–¸ì–´ë¡œ ì¬í•´ì„ë˜ë©°,
     ìƒí’ˆìœ¼ë¡œ í™•ì¥ë˜ì–´ ì†Œë¹„ê¹Œì§€ ì´ì–´ì§€ëŠ” íë¦„ì„ ë³´ì¸ë‹¤.</p>
</div>
        </div>

        <div class="chart-meta-row">
          <div class="legend-inline" id="legendInline">
            <!-- JSì—ì„œ ì±„ì›€ -->
          </div>
          <div>ë‹¨ìœ„: ê²€ìƒ‰ ê´€ì‹¬ë„(0â€“100, ìƒëŒ€ ì§€ìˆ˜)</div>
        </div>
      </section>

      <!-- RIGHT: Insight cards -->
      <section class="panel">
        <div class="cards">
          <article class="mini-card">
            <div>
              <div class="kicker">A ê·¸ë£¹ Â· êµ¿ì¦ˆÂ·ìƒí’ˆ ì¹´í…Œê³ ë¦¬</div>
              <h3>ì „í†µ ë¬¸í™”ìœ ì‚°ì„ êµ¿ì¦ˆë¡œ ì†Œë¹„í•˜ëŠ” íë¦„</h3>
              <p>
                êµ­ë¦½ì¤‘ì•™ë°•ë¬¼ê´€ êµ¿ì¦ˆ, ë®¤ì§€ì—„ìƒµ êµ¿ì¦ˆ, ë°˜ê°€ì‚¬ìœ ìƒ êµ¿ì¦ˆ, í˜¸ë‘ì´Â·ê¹Œì¹˜ êµ¿ì¦ˆ, ê¸ˆë™ëŒ€í–¥ë¡œ êµ¿ì¦ˆ ë“± ì „í†µ
                ìœ ë¬¼ì´ í˜„ëŒ€ ë””ìì¸ ìƒí’ˆìœ¼ë¡œ ì¬í•´ì„ëœ ì‚¬ë¡€ë¥¼ ëŒ€í‘œí•œë‹¤.
              </p>
              <div class="meta">ëŒ€í‘œ í‚¤ì›Œë“œ: êµ­ë¦½ì¤‘ì•™ë°•ë¬¼ê´€ êµ¿ì¦ˆ Â· ë°˜ê°€ì‚¬ìœ ìƒ êµ¿ì¦ˆ</div>
            </div>
            <div class="mini-thumb a" aria-hidden="true"></div>
          </article>

          <article class="mini-card">
            <div>
              <div class="kicker">B ê·¸ë£¹ Â· ì „í†µ ì†Œì¬ ì¹´í…Œê³ ë¦¬</div>
              <h3>ìê°œÂ·ë¯¼í™”Â·ë‹¨ì²­Â·ì „í†µë¬¸ì–‘Â·ê³ ë ¤ì²­ì</h3>
              <p>
                ìê°œ, ë¯¼í™”, ë‹¨ì²­, ì „í†µë¬¸ì–‘, ê³ ë ¤ì²­ìëŠ” KCDFÂ·ë¬¸í™”ì¬ì²­Â·êµ­ë¦½ì¤‘ì•™ë°•ë¬¼ê´€ ë“±ì—ì„œ í˜„ëŒ€ ë””ìì¸ì˜ í•µì‹¬ ì „í†µ
                ì†Œì¬(ì‹œê° ìš”ì†Œ)ë¡œ ë°˜ë³µ í™œìš©ë˜ëŠ” ëŒ€í‘œì ì¸ ë¬¸í™”ìœ ì‚° ê¸°ë°˜ ëª¨í‹°í”„ì´ë‹¤.
              </p>
              <div class="meta">ëŒ€í‘œ í‚¤ì›Œë“œ: ìê°œ Â· ì „í†µë¬¸ì–‘ Â· ê³ ë ¤ì²­ì</div>
            </div>
            <div class="mini-thumb b" aria-hidden="true"></div>
          </article>

          <article class="mini-card">
            <div>
              <div class="kicker">C ê·¸ë£¹ Â· ê¸°ê´€Â·í”Œë«í¼ ì¹´í…Œê³ ë¦¬</div>
              <h3>ë¬¸í™”ìœ ì‚° ë¦¬ë””ìì¸ ìƒíƒœê³„ë¥¼ ë§Œë“œëŠ” ê¸°ê´€</h3>
              <p>
                êµ­ë¦½ì¤‘ì•™ë°•ë¬¼ê´€, êµ­ê°€ìœ ì‚°ì§„í¥ì›, KCDF(í•œêµ­ê³µì˜ˆÂ·ë””ìì¸ë¬¸í™”ì§„í¥ì›), í•œêµ­ë¬¸í™”ì¬ì¬ë‹¨, ê³µì˜ˆíŠ¸ë Œë“œí˜ì–´ ë“±ì€
                ê³µëª¨ì „Â·ì „ì‹œÂ·ìœ í†µì„ í†µí•´ ë¬¸í™”ìœ ì‚° ê¸°ë°˜ ì½˜í…ì¸  ì œì‘Â·í™•ì‚°ì„ ì£¼ë„í•˜ëŠ” í—ˆë¸Œ ì—­í• ì„ í•œë‹¤.
              </p>
              <div class="meta">ëŒ€í‘œ í‚¤ì›Œë“œ: KCDF Â· êµ­ê°€ìœ ì‚°ì§„í¥ì› Â· ê³µì˜ˆíŠ¸ë Œë“œí˜ì–´</div>
            </div>
            <div class="mini-thumb c" aria-hidden="true"></div>
          </article>
        </div>
      </section>
    </div>

    <footer>
      <span>ë°ì´í„°: Google Trends Â· ëŒ€í•œë¯¼êµ­ Â· ìµœê·¼ 5ë…„ Â· ì›¹ ê²€ìƒ‰ ê¸°ì¤€</span>
      <span>ì‹œê°í™”: HTML / CSS / Chart.js</span>
    </footer>
  </div>

  <script>
    // THEME TOGGLE
    const root = document.documentElement;
    const btnDark = document.getElementById("themeDark");
    const btnLight = document.getElementById("themeLight");

    function setTheme(mode) {
      root.setAttribute("data-theme", mode);
      if (mode === "dark") {
        btnDark.classList.add("is-active");
        btnLight.classList.remove("is-active");
      } else {
        btnLight.classList.add("is-active");
        btnDark.classList.remove("is-active");
      }
    }

    btnDark.addEventListener("click", () => setTheme("dark"));
    btnLight.addEventListener("click", () => setTheme("light"));

    // GROUP TOGGLES
    const toggleA = document.getElementById("toggleA");
    const toggleB = document.getElementById("toggleB");
    const toggleC = document.getElementById("toggleC");

    const palette = [
      { border: "rgba(56, 189, 248, 1)", fill: "rgba(56, 189, 248, 0.22)" },
      { border: "rgba(96, 165, 250, 1)", fill: "rgba(96, 165, 250, 0.22)" },
      { border: "rgba(167, 139, 250, 1)", fill: "rgba(167, 139, 250, 0.22)" },
    ];

    let chart;

    function buildLegend(datasets) {
      const legend = document.getElementById("legendInline");
      legend.innerHTML = "";
      datasets.forEach((ds, idx) => {
        const item = document.createElement("div");
        item.className = "legend-item";
        const sw = document.createElement("span");
        sw.className = "legend-swatch";
        sw.style.background = palette[idx].border;
        const label = document.createElement("span");
        label.textContent = ds.label;
        legend.appendChild(item);
        item.appendChild(sw);
        item.appendChild(label);
      });
    }

    fetch("trends_merged.json")
      .then((res) => res.json())
      .then((json) => {
        const groups = json.groups || [];
        if (!groups.length) return;

        // ëŒ€í‘œ í‚¤ì›Œë“œ: ê° ê·¸ë£¹ì˜ ì²« ë²ˆì§¸ ì‹œë¦¬ì¦ˆ ì‚¬ìš©
        const labels = groups[0].series[0].data.map((p) => p.date);

        const datasets = groups.map((g, idx) => {
          const rep = g.series[0];
          return {
            label: `${g.label} Â· ${rep.keyword}`,
            data: rep.data.map((p) => p.value),
            borderColor: palette[idx].border,
            backgroundColor: palette[idx].fill,
            borderWidth: 2,
            tension: 0.35,
            pointRadius: 0,
            pointHitRadius: 6,
            hidden: false,
          };
        });

        const ctx = document.getElementById("trendChart").getContext("2d");
        chart = new Chart(ctx, {
          type: "line",
          data: {
            labels,
            datasets,
          },
          options: {
            responsive: true,
            maintainAspectRatio: false,
            interaction: {
              mode: "index",
              intersect: false,
            },
            plugins: {
              legend: {
                display: false,
              },
              tooltip: {
                callbacks: {
                  title: (items) => {
                    const raw = items[0].label || "";
                    return raw.replace(/-/g, ".");
                  },
                  label: (item) => {
                    const v = item.parsed.y;
                    return `${item.dataset.label}: ${v}`;
                  },
                },
              },
            },
            scales: {
              x: {
                grid: {
                  color: "rgba(148, 163, 184, 0.15)",
                },
                ticks: {
                  autoSkip: true,
                  maxTicksLimit: 6,
                  color: "rgba(148, 163, 184, 0.9)",
                  font: { size: 10 },
                },
              },
              y: {
                grid: {
                  color: "rgba(148, 163, 184, 0.15)",
                },
                ticks: {
                  color: "rgba(148, 163, 184, 0.9)",
                  font: { size: 10 },
                  beginAtZero: true,
                  max: 100,
                },
              },
            },
          },
        });

        buildLegend(datasets);

        function syncVisibility() {
          const flags = [toggleA.checked, toggleB.checked, toggleC.checked];
          flags.forEach((on, idx) => {
            chart.setDatasetVisibility(idx, on);
          });
          chart.update();
        }

        toggleA.addEventListener("change", syncVisibility);
        toggleB.addEventListener("change", syncVisibility);
        toggleC.addEventListener("change", syncVisibility);
      })
      .catch((err) => {
        console.error("ë°ì´í„° ë¡œë“œ ì˜¤ë¥˜:", err);
      });
  </script>
</body>
</html>
